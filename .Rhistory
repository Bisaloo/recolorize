merged_obj <- recolorize.obj
merged_obj$centers <- color_centers[orig_layers, ]
merged_obj$sizes <- color_sizes[orig_layers]
# now, for every set of colors to combine...
for (i in 1:length(color_combine)) {
# get the vector of colors to combine
merge_vector <- color_combine[[i]]
# extract the first layer
layer <- layers[[merge_vector[1]]]
# get weighted average
col_avg <- apply(color_centers[merge_vector, ], 2,
function(j) stats::weighted.mean(j, color_sizes[merge_vector]))
merged_obj$centers <- rbind(merged_obj$centers, col_avg)
merged_obj$sizes <- rbind(merged_obj$sizes, color_sizes[merge_vector])
# change pixel assignments
px_idx <- which(merged_obj$pixel.assignments %in% merge_vector)
merged_obj$pixel.assignments[px_idx] <- i
# then add the others -- this is silly but doesn't seem that slow
for (j in 2:length(merge_vector)) {
layer <- layer + layers[[merge_vector[j]]]
}
# now clean & fill
layer <- imager::clean(imager::fill(as.cimg(layer), fill), clean)
# and recolor
blank_img <- colorise(blank_img, layer, col_avg)
}
as_array <- recolorize:::cimg.to.array(blank_img)
as_array <- abind::abind(as_array, original[ , , 4], along = 3)
plotImageArray(as_array)
merged_obj$recolored.img <- as_array
return(merged_obj)
}
merged <- mergeLayers(recolorize.obj,
color_combine = color_combine)
layout(matrix(1:2, nrow = 1))
plotImageArray(merged$recolored.img)
merged_clean <- cleanLayers(merged,
clean = c(1, 1, 1, 1, 1),
fill = c(1, 1, 1, 1, 1))
plotImageArray(merged_clean$recolored_img)
{merged_clean <- cleanLayers(merged,
clean = c(1, 1, 1, 1, 1),
fill = c(1, 1, 1, 1, 1))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
clean = c(1, 1, 1, 1, 1),
fill = c(1, 1, 1, 1, 1))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
clean = c(1, 1, 1, 1, 1),
fill = c(1, 1, 1, 4, 1))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
clean = c(1, 1, 1, 1, 1),
fill = c(1, 1, 1, 3, 1))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
clean = c(2, 1, 1, 1, 1),
fill = c(2, 1, 1, 3, 1))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
clean = c(2, 1, 1, 1, 1),
fill = c(2, 1, 1, 3, 2))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
clean = c(2, 1, 1, 1, 1),
fill = c(2, 1, 2, 3, 2))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
clean = c(2, 1, 1, 3, 1),
fill = c(2, 1, 2, 4, 2))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
clean = c(2, 1, 1, 3, 1),
fill = c(2, 1, 2, 3, 2))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3)
clean = c(2, 1, 1, 3, 1),
fill = c(2, 1, 2, 3, 2))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = c(2, 1, 1, 3, 1),
fill = c(2, 1, 2, 3, 2))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = c(2, 1, 3, 1, 1),
fill = c(2, 1, 3, 2, 2))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = c(2, 1, 3, 1, 2),
fill = c(2, 1, 3, 2, 2))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = c(2, 1, 3, 1, 2),
fill = c(2, 1, 3, 2, 3))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = c(2, 1, 3, 1, 3),
fill = c(2, 1, 3, 2, 3))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
clean = c(2, 1, 1, 3, 1),
fill = c(2, 1, 2, 3, 2))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
clean = c(2, 1, 1, 3, 1),
fill = c(2, 2, 2, 3, 2))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = c(2, 1, 3, 1, 1),
fill = c(2, 2, 3, 2, 2))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = c(2, 1, 3, 1, 2),
fill = c(2, 2, 3, 2, 2))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = c(2, 1, 3, 1, 2),
fill = c(2, 2, 3, 2, 3))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = c(2, 1, 2, 1, 2),
fill = c(2, 2, 3, 2, 3))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = c(2, 1, 2, 1, 2),
fill = c(2, 2, 4, 2, 3))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = c(2, 1, 3, 1, 2),
fill = c(2, 2, 4, 2, 3))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = c(2, 1, 2, 1, 2),
fill = c(2, 2, 5, 2, 3))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = c(2, 1, 3, 1, 2),
fill = c(2, 2, 3, 2, 3))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = c(2, 1, 2, 1, 2),
fill = c(2, 2, 3, 2, 3))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = 2,
fill = 3)
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = c(2, 1, 2, 1, 2),
fill = c(2, 2, 3, 2, 3))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = c(2, 1, 2, 1, 2),
fill = c(2, 2, 2, 2, 2))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = 1,
fill = 1)
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = 2,
fill = 1)
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = 2,
fill = 2)
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(1, 2, 4, 5, 3),
clean = 1,
fill = 2)
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3),
clean = 1,
fill = 2)
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3),
clean = 2,
fill = 2)
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3),
clean = 2,
fill = 3)
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3),
clean = 2,
fill = 4)
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3),
clean = c(1, 4),
fill = c(2, 4))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3),
clean = c(1, 2),
fill = c(2, 4))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3),
clean = c(1, 3),
fill = c(2, 4))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3),
clean = c(1, 3),
fill = c(2, 2))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3),
clean = c(1, 2),
fill = c(2, 2))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3),
clean = c(1, 2),
fill = c(2, 3))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3),
clean = c(1, 2),
fill = c(3, 3))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(3, 4),
clean = c(1, 2),
fill = c(3, 3))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3),
clean = c(1, 2),
fill = c(1, 3))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3),
clean = c(1, 2),
fill = c(3, 3))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3),
clean = c(1, 2),
fill = c(4, 3))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3, 4),
clean = c(1, 2, 1),
fill = c(4, 3, 2))
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3, 4),
clean = 1,
fill = 3)
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(merged$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
plotImageArray(recolorize.obj$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3, 4),
clean = 1,
fill = 3)
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(recolorize.obj$recolored.img)
plotColorPalette(merged$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img)}
plotImageArray(merged_clean$recolored_img,
main = "Merging 3&5, 4&7, 6&8")}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3, 4),
clean = 1,
fill = 3)
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(recolorize.obj$recolored.img)
plotColorPalette(recolorize.obj$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img,
main = "Merging 3&5, 4&7, 6&8")}
plotImageArray(merged_clean$recolored_img,
main = "Merging 3 & 5, 4 & 7, 6 & 8")}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3, 4),
clean = 1,
fill = 3)
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(recolorize.obj$recolored.img)
plotColorPalette(recolorize.obj$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img,
main = "Merging 3 & 5, 4 & 7, 6 & 8")}
plotImageArray(merged_clean$recolored_img,
main = "Merging 3+5, 4+7, 6+8")}
{merged_clean <- cleanLayers(merged,
layer_idx = c(4, 3, 4),
clean = 1,
fill = 3)
layout(matrix(1:3, nrow = 1), widths = c(0.4, 0.2, 0.4))
plotImageArray(recolorize.obj$recolored.img)
plotColorPalette(recolorize.obj$centers, horiz = FALSE)
plotImageArray(merged_clean$recolored_img,
main = "Merging 3+5, 4+7, 6+8")}
recolorize_obj <- recolorize.obj
class(recolorize_obj)
fill
fv = 1
cv = 2
color_to = "weighted average"
color_to = list(c(1, 0, 0), c(0, 1, 0), c(1, 1, 0))
lapply(list(fv, cv, color_to), length)
unlist(lapply(list(fv, cv, color_to), length))
unlist(lapply(list(fv, cv, color_to), length)) %in% c(1, 3)
all(unlist(lapply(list(fv, cv, color_to), length)) %in% c(1, 3))
merge_list <- list(1:8)
merge-list
merge_list
as.list(1:8)
merge_list <- as.list(1:nrow(recolorize_obj$centers))
merge_list
# we want everything that is not a part of the final
# set of layers to be transparent
orig_layers <- which(!(1:length(layers) %in% unlist(merge_list)))
orig_layers
# get centers and sizes
centers <- recolorize_obj$centers
sizes <- recolorize_obj$sizes
# get the list of untouched layers
orig_layers <- which(!(1:length(layers) %in% unlist(merge_list)))
merged_obj$centers <- centers[orig_layers, ]
merged_obj$sizes <- sizes[orig_layers]
centers[orig_layers]
merged_obj$centers
merged_obj$sizes
recolorize_obj$pixel.assignments
unique(recolorize_obj$pixel.assignments)
?colordistance::getLabHist
?colordistance::getImageHist
img
loadimg <- colordistance::loadImage(img)
dim(loadimg)
names(loadimg)
