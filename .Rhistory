re_fit <- recluster(init_fit, similarity_cutoff = 40)
# examine individual layers:
layout(matrix(1:6, nrow = 2))
layers <- splitByColor(re_fit, plot_method = "color")
# notice patch 2 (cream) - lots of stray pixels
edit_cream_layer <- editLayer(re_fit,
layer_idx = 2,
operation = "clean",
px_size = 3)
# shrinking and growing by the same element size gives us less flexibility, so
# we can also shrink and then grow, using different px_size arguments:
edit_green_1 <- editLayer(re_fit,
layer_idx = 4,
operation = "shrink",
px_size = 2)
edit_green_2 <- editLayer(edit_1,
layer_idx = 4,
operation = "grow",
px_size = 3)
# we can get pleasingly mondrian about it:
new_fit <- re_fit
for (i in 1:nrow(new_fit$centers)) {
new_fit <- editLayer(new_fit,
layer_idx = i,
operation = "fill",
px_size = 5, plotting = FALSE)
}
plot(new_fit)
recolorize(img)
devtools::run_examples()
devtools::run_examples()
warnings()
devtools::run_example()
library(recolorize)
?editLayer
img <- system.file("inst/extdata/corbetti.png", package = "recolorize")
init_fit <- recolorize(img, bins = 2, plotting = FALSE)
img
system.file("extdata/corbetti.png", package = "recolorize")
system.file("inst/extdata/corbetti.png", package = "recolorize")
# an ideal outline
img <- system.file("extdata/fulgidissima.png", "recolorize")
img <- imager::load.image(img)
# an ideal outline
img <- system.file("extdata/fulgidissima.png", "recolorize")
img <- imager::load.image(img)
# an ideal outline
img <- system.file("extdata/fulgidissima.png", "recolorize")
img
# an ideal outline
img <- system.file("extdata", "/fulgidissima.png", "recolorize")
img
?editLayers
devtools::load_all(".")
?editLayers
# an ideal outline
img <- system.file("extdata/fulgidissima.png", package = "recolorize")
img
img <- imager::load.image(img)
dim(img)
max(dim(img)) * 0.1
round(max(dim(img)) * 0.05)
n <- round(max(dim(img)) * 0.05)
?medianblur
img <- imager::medianblur(img, n, threshold = 255)
plot(img)
img <- imager::medianblur(img, n, threshold = 1)
plot(img)
img <- imager::medianblur(img, n, threshold = 2)
plot(img)
img <- imager::medianblur(img, n, threshold = 3)
plot(img)
img <- imager::medianblur(img, n, threshold = 255)
plot(img)
img <- imager::medianblur(img, n, threshold = 1000)
plot(img)
img <- imager::medianblur(img, n, threshold = 10000000)
plot(img)
img <- imager::medianblur(img, n, threshold = 1)
plot(img)
# an ideal outline
img <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- imager::load.image(img)
n <- round(max(dim(img)) * 0.05)
blur_img <- imager::medianblur(img, n, threshold = 1)
plot(blur_img)
blur_img <- imager::medianblur(img, n, threshold = 10)
plot(blur_img)
blur_img <- imager::medianblur(img, n, threshold = 255)
plot(blur_img)
blur_img <- imager::medianblur(img, n, threshold = 0.1)
plot(blur_img)
blur_img <- imager::medianblur(img, n, threshold = 0.5)
plot(blur_img)
blur_img <- imager::medianblur(img, n, threshold = 1)
plot(blur_img)
blur_img <- imager::medianblur(img, n, threshold = 2)
plot(blur_img)
blur_img <- imager::medianblur(img, n, threshold = 3)
plot(blur_img)
blur_img <- imager::medianblur(img, n, threshold = 0.5)
plot(blur_img)
# an ideal outline
img <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img)
# an ideal outline
img <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img)
img <- recolorize:::array_to_cimg(img)
n <- round(max(dim(img)) * 0.05)
blur_img <- imager::medianblur(img, n, threshold = 0.5)
plot(blur_img)
blur_img <- imager::medianblur(img, n, threshold = 1)
plot(blur_img)
blur_img <- imager::medianblur(img, n, threshold = 0.5)
plot(blur_img)
img2 <- recolorize:::cimg_to_array(blur_img)
test <- recolorize(img2)
dim(blur_img)
# an ideal outline
img <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img)
c_img <- recolorize:::array_to_cimg(img)
n <- round(max(dim(img)) * 0.05)
blur_img <- imager::medianblur(c_img, n, threshold = 0.5)
plot(blur_img)
img2 <- recolorize:::cimg_to_array(blur_img)
img2 <- abind::abind(img2, img[,,4], along = 3)
test <- recolorize(img2)
test <- recolorize(img2, bins = 3)
blur_img <- imager::medianblur(c_img, n, threshold = 0.1)
plot(blur_img)
img2 <- recolorize:::cimg_to_array(blur_img)
img2 <- abind::abind(img2, img[,,4], along = 3)
test <- recolorize(img2, bins = 3)
test <- recolorize(img2, method = "k")
recolorize(img, method = "k")
blur_img <- imager::medianblur(c_img, n, threshold = 0.5)
img2 <- recolorize:::cimg_to_array(blur_img)
img2 <- abind::abind(img2, img[,,4], along = 3)
test <- recolorize(img2, method = "k")
test <- recolorize(img2, bins = 3)
recluster(test)
test2 <- recluster(test)
test <- recolorize(img2, bins = 5)
test2 <- recluster(test)
test <- recolorize(img2, bins = 4)
test2 <- recluster(test)
test <- recolorize(img2, bins = 3)
test2 <- recluster(test)
test2 <- recluster(test, plot_hclust = TRUE)
test2 <- recluster(test, plot_hclust = TRUE, similarity_cutoff = 65)
test2 <- recluster(test, plot_hclust = TRUE, similarity_cutoff = 60)
plot(test2, sizes = F)
test3 <- mergeLayers(test2, list(c(2, 3, 5, 6),
c(1, 4, 7)))
test2 <- recluster(test, plot_hclust = TRUE,
=n_final = 2)
test2 <- recluster(test, plot_hclust = TRUE,
n_final = 2)
test2 <- recluster(test)
plot(test2, sizes = F)
test3 <- mergeLayers(test2, list(c(2, 3, 5, 6),
c(1, 4, 7)))
test3 <- mergeLayers(test2, list(c(2, 3, 5, 6),
c(4, 7)))
test3 <- mergeLayers(test2, list(c(2, 3, 5, 6),
c(1, 4, 7)))
splitByColor(test3)
layers <- splitByColor(test3)
layout(1:2)
layers <- splitByColor(test3, plot_method = "color")
layout(matrix(1:2, nrow = 1))
layers <- splitByColor(test3, plot_method = "color")
editLayers(test3)
test4 <- editLayers(test3,
operations = c("fill", "clean"),
px_sizes = c(3, 3))
layout(matrix(1:2, nrow = 1))
layers <- splitByColor(test4, plot_method = "color")
test <- recolorize(img, bins = 3)
test2 <- recluster(test)
test <- recolorize(img, bins = 2)
test <- recolorize(img, bins = 3)
test2 <- recluster(test)
test <- recolorize(img2, bins = 3)
test2 <- recluster(test)
plot(test2, sizes = F)
test3 <- mergeLayers(test2, list(c(2, 3, 5, 6),
c(1, 4, 7)))
test4 <- editLayers(test3,
operations = c("fill", "clean"),
px_sizes = c(3, 3))
layout(matrix(1:2, nrow = 1))
layers <- splitByColor(test4, plot_method = "color") # NICE!
recolorize(img, method = "k", n = 2)
img
?imager::blur_anisotropic
?imager::medianblur
?imager::isoblur
?switch
?imager::boxblur_xy
?isoblur
isoblur(boats,3) %>% plot(main="Isotropic blur, sigma=3")
isoblur(boats,10) %>% plot(main="Isotropic blur, sigma=3")
?blurImage
img_path <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img_path)
blurred_img <- blurImage(img, "medianblur", n = 5, threshold = 0.5)
plotImageArray(blurred_img)
devtools::load_all(".")
img_path <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img_path)
blurred_img <- blurImage(img, "medianblur", n = 5, threshold = 0.5)
plotImageArray(blurred_img)
?blur_anisotropic
?boxblur
?blurImage
?blur
devtools::load_all(".")
?blurImage
img_path <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img_path)
median_img <- blurImage(img, "medianblur", n = 5, threshold = 0.5)
anisotropic_img <- blurImage(img, "anisotropic",
amplitude = 1, sharpness = 0.5)
boxblur_img <- blurImage(img, "boxblur", boxsize = 5)
graphics::layout(matrix(1:4, nrow = 2))
plotImageArray(img, "original")
plotImageArray(median_img, "median")
plotImageArray(anisotropic_img, "anisotropic")
plotImageArray(boxblur_img, "boxblur")
img_path <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img_path)
median_img <- blurImage(img, "medianblur", n = 5, threshold = 0.5)
anisotropic_img <- blurImage(img, "anisotropic",
amplitude = 0.5, sharpness = 0.5)
boxblur_img <- blurImage(img, "boxblur", boxsize = 5)
graphics::layout(matrix(1:4, nrow = 2))
plotImageArray(img, "original")
plotImageArray(median_img, "median")
plotImageArray(anisotropic_img, "anisotropic")
plotImageArray(boxblur_img, "boxblur")
img_path <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img_path)
median_img <- blurImage(img, "medianblur", n = 5, threshold = 0.5)
anisotropic_img <- blurImage(img, "anisotropic",
amplitude = 0.5)
boxblur_img <- blurImage(img, "boxblur", boxsize = 5)
graphics::layout(matrix(1:4, nrow = 2))
plotImageArray(img, "original")
plotImageArray(median_img, "median")
plotImageArray(anisotropic_img, "anisotropic")
plotImageArray(boxblur_img, "boxblur")
img_path <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img_path)
median_img <- blurImage(img, "medianblur", n = 5, threshold = 0.5)
anisotropic_img <- blurImage(img, "anisotropic",
amplitude = 0)
boxblur_img <- blurImage(img, "boxblur", boxsize = 5)
graphics::layout(matrix(1:4, nrow = 2))
plotImageArray(img, "original")
plotImageArray(median_img, "median")
plotImageArray(anisotropic_img, "anisotropic")
plotImageArray(boxblur_img, "boxblur")
?anisotropic_blur
devtools::load_all(".")
?blurImage
devtools::load_all(".")
?blurImage
img_path <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img_path)
median_img <- blurImage(img, "medianblur", n = 5, threshold = 0.5)
anisotropic_img <- blurImage(img, "blur_anisotropic",
amplitude = 0.5, sharpness = 0.5)
boxblur_img <- blurImage(img, "boxblur", boxsize = 5)
graphics::layout(matrix(1:4, nrow = 1))
plotImageArray(img, "original")
plotImageArray(median_img, "median")
plotImageArray(anisotropic_img, "anisotropic")
plotImageArray(boxblur_img, "boxblur")
boxblur_img <- blurImage(img, "boxblur", boxsize = 5)
plotImageArray(boxblur_img)
range(boxblur_img)
blur_function <- "boxblur"
img
c_img <- array_to_cimg(img)
plot(imager::boxblur(c_img, 5))
blur_img <- imager::boxblur(c_img, 5)
new_img <- cimg_to_array(blur_img)
plotImageArray(new_img)
range(new_img)
new_img <- cimg_to_array(blur_img)
new_img[which(new_img) < 0] <- 0
new_img[which(new_img < 0)] <- 0
plotImageArray(new_img)
range(new_img)
dim(new_img)
dim(img)
devtools::load_all(".")
?blurImage
boxblur_img <- blurImage(img, "boxblur", boxsize = 5)
dim(boxblur_img)
plotImageArray(boxblur_img)
devtools::load_all(".")
boxblur_img <- blurImage(img, "boxblur", boxsize = 5)
plotImageArray(boxblur_img)
devtools::load_all(".")
?blurImage
img_path <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img_path)
median_img <- blurImage(img, "medianblur", n = 5, threshold = 0.5)
anisotropic_img <- blurImage(img, "blur_anisotropic",
amplitude = 0.5, sharpness = 0.5)
boxblur_img <- blurImage(img, "boxblur", boxsize = 5)
graphics::layout(matrix(1:4, nrow = 1))
plotImageArray(img, "original")
plotImageArray(median_img, "median")
plotImageArray(anisotropic_img, "anisotropic")
plotImageArray(boxblur_img, "boxblur")
img_path <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img_path)
median_img <- blurImage(img, "medianblur", n = 5, threshold = 0.5)
anisotropic_img <- blurImage(img, "blur_anisotropic",
amplitude = 1, sharpness = 0.5)
boxblur_img <- blurImage(img, "boxblur", boxsize = 5)
graphics::layout(matrix(1:4, nrow = 1))
plotImageArray(img, "original")
plotImageArray(median_img, "median")
plotImageArray(anisotropic_img, "anisotropic")
plotImageArray(boxblur_img, "boxblur")
img_path <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img_path)
median_img <- blurImage(img, "medianblur", n = 5, threshold = 0.5)
anisotropic_img <- blurImage(img, "blur_anisotropic",
amplitude = 1, sharpness = 0)
boxblur_img <- blurImage(img, "boxblur", boxsize = 5)
graphics::layout(matrix(1:4, nrow = 1))
plotImageArray(img, "original")
plotImageArray(median_img, "median")
plotImageArray(anisotropic_img, "anisotropic")
plotImageArray(boxblur_img, "boxblur")
img_path <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img_path)
median_img <- blurImage(img, "medianblur", n = 5, threshold = 0.5)
anisotropic_img <- blurImage(img, "blur_anisotropic",
amplitude = 1, sharpness = 0.3)
boxblur_img <- blurImage(img, "boxblur", boxsize = 5)
graphics::layout(matrix(1:4, nrow = 1))
plotImageArray(img, "original")
plotImageArray(median_img, "median")
plotImageArray(anisotropic_img, "anisotropic")
plotImageArray(boxblur_img, "boxblur")
img_path <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img_path)
median_img <- blurImage(img, "medianblur", n = 5, threshold = 0.5)
anisotropic_img <- blurImage(img, "blur_anisotropic",
amplitude = 1, sharpness = 0.1)
boxblur_img <- blurImage(img, "boxblur", boxsize = 5)
graphics::layout(matrix(1:4, nrow = 1))
plotImageArray(img, "original")
plotImageArray(median_img, "median")
plotImageArray(anisotropic_img, "anisotropic")
plotImageArray(boxblur_img, "boxblur")
img_path <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img_path)
median_img <- blurImage(img, "medianblur", n = 5, threshold = 0.5)
anisotropic_img <- blurImage(img, "blur_anisotropic",
amplitude = 1, sharpness = 0.05)
boxblur_img <- blurImage(img, "boxblur", boxsize = 5)
graphics::layout(matrix(1:4, nrow = 1))
plotImageArray(img, "original")
plotImageArray(median_img, "median")
plotImageArray(anisotropic_img, "anisotropic")
plotImageArray(boxblur_img, "boxblur")
img_path <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img_path)
median_img <- blurImage(img, "medianblur", n = 5, threshold = 0.5)
anisotropic_img <- blurImage(img, "blur_anisotropic",
amplitude = 1, sharpness = 0.01)
boxblur_img <- blurImage(img, "boxblur", boxsize = 5)
graphics::layout(matrix(1:4, nrow = 1))
plotImageArray(img, "original")
plotImageArray(median_img, "median")
plotImageArray(anisotropic_img, "anisotropic")
plotImageArray(boxblur_img, "boxblur")
img_path <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img_path)
median_img <- blurImage(img, "medianblur", n = 5, threshold = 0.5)
anisotropic_img <- blurImage(img, "blur_anisotropic",
amplitude = 5, sharpness = 0.01)
boxblur_img <- blurImage(img, "boxblur", boxsize = 5)
graphics::layout(matrix(1:4, nrow = 1))
plotImageArray(img, "original")
plotImageArray(median_img, "median")
plotImageArray(anisotropic_img, "anisotropic")
plotImageArray(boxblur_img, "boxblur")
img_path <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img_path)
median_img <- blurImage(img, "medianblur", n = 5, threshold = 0.5)
anisotropic_img <- blurImage(img, "blur_anisotropic",
amplitude = 5, sharpness = 0.1)
boxblur_img <- blurImage(img, "boxblur", boxsize = 5)
graphics::layout(matrix(1:4, nrow = 1))
plotImageArray(img, "original")
plotImageArray(median_img, "median")
plotImageArray(anisotropic_img, "anisotropic")
plotImageArray(boxblur_img, "boxblur")
blur_img <- blurImage(img, "blur_anisotropic", amplitude = 5, sharpness = 0.1)
devtools::load_all(".")
# an ideal outline
img <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img)
blur_img <- blurImage(img, "blur_anisotropic",
amplitude = 5, sharpness = 0.1)
test <- recolorize(blur_img, bins = 3)
test2 <- recluster(test)
blur_img <- blurImage(img, "blur_anisotropic",
amplitude = 10, sharpness = 0.1)
test <- recolorize(blur_img, bins = 3)
test2 <- recluster(test)
blur_img <- blurImage(img, "medianblur",
n = 5, threshold = 0.5)
test <- recolorize(blur_img, bins = 3)
test2 <- recluster(test)
plot(test2, sizes = F)
test3 <- mergeLayers(test2, list(c(2, 3, 5, 6),
c(1, 4, 7)))
max(dim(img))
max(dim(img)) * 0.05
blur_img <- blurImage(img, "medianblur",
n = 11, threshold = 0.5)
test <- recolorize(blur_img, bins = 3)
test2 <- recluster(test)
plot(test2, sizes = F)
test3 <- mergeLayers(test2, list(c(2, 3, 5, 6),
c(1, 4, 7)))
blur_img <- blurImage(img, "blur_ani",
n = 11, threshold = 0.5)
blur_img <- blurImage(img, "blur_ani",
amplitude = 10)
blur_img <- blurImage(img, "blur_ani",
amplitude = 10, sharpness = 0.1)
blur_img <- blurImage(img, "blur_ani",
amplitude = 20, sharpness = 0.1)
blur_img <- blurImage(img, "blur_ani",
amplitude = 20, sharpness = 0.5)
blur_img <- blurImage(img, "blur_ani",
amplitude = 20, sharpness = 0.2)
test <- recolorize(blur_img, bins = 3)
test2 <- recluster(test)
blur_img <- blurImage(img, "blur_ani",
amplitude = 30, sharpness = 0.2)
blur_img <- blurImage(img, "blur_ani",
amplitude = 30, sharpness = 0.15)
test <- recolorize(blur_img, bins = 3)
blur_img <- blurImage(img, "median",
n = 10, threshold = 0.5)
test <- recolorize(blur_img, bins = 3)
test2 <- recluster(test)
blur_img <- blurImage(img, "median",
n = 11, threshold = 0.5)
test <- recolorize(blur_img, bins = 3)
test2 <- recluster(test)
plot(test2, sizes = F)
test3 <- mergeLayers(test2, list(c(2, 3, 5, 6),
c(1, 4, 7)))
test4 <- editLayers(test3,
operations = c("fill", "clean"),
px_sizes = c(3, 3))
layout(matrix(1:2, nrow = 1))
layers <- splitByColor(test4, plot_method = "color") # NICE!
fit1 <- recolorize(blur_img, bins = 3)
fit2 <- recluster(fit1)
fit3 <- mergeLayers(fit2, list(c(2, 3, 5, 6),
c(1, 4, 7)))
fit4 <- editLayers(fit3,
operations = c("fill", "clean"),
px_sizes = c(3, 3))
layout(matrix(1:2, nrow = 1))
layers <- splitByColor(fit4, plot_method = "color") # NICE!
# compare to doing the standard thing:
recolorize(img, method = "k", n = 2)
# an ideal outline
img <- system.file("extdata/fulgidissima.png", package = "recolorize")
img <- readImage(img)
blur_img <- blurImage(img, "median",
n = 11, threshold = 0.5)
plotImageArray(img)
# well, we can just use k-means clustering, that should work, right?
recolorize(img, method = "k", n = 2)
# the shininess and features are getting in our way here:
blur_img <- blurImage(img, "median",
n = 11, threshold = 0.5)
# the shininess and features are getting in our way here:
blur_img <- blurImage(img, "median",
n = 11, threshold = 0.5)
# then clean up:
fit4 <- editLayers(fit3,
operations = c("fill", "clean"),
px_sizes = c(3, 3))
layout(matrix(1:2, nrow = 1))
layers <- splitByColor(fit4, plot_method = "color") # NICE!
# then cluster by similarity:
fit2 <- recluster(fit1)
dist(fit1$centers)
plot(hclust(dist(fit1$centers)))
plot(hclust(dist(fit1$centers[ , 1:2])))
cutree(hclust(dist(fit1$centers[ , 1:2])))
cutree(hclust(dist(fit1$centers[ , 1:2])), k = 0.5)
cutree(hclust(dist(fit1$centers[ , 1:2])), n = 0.5)
cutree(hclust(dist(fit1$centers[ , 1:2])), h = 0.5)
